plugins {
	id 'application'
}

allprojects {
	apply plugin: 'java'

	version = project.version
	sourceCompatibility = JavaVersion.VERSION_1_8
	targetCompatibility = JavaVersion.VERSION_1_8
}

task fatJar(type: Jar) {
	inputs.property "archivesName", project.base.archivesName
	from allprojects.collect { project ->
		project.sourceSets.main.output
	}
}

task devFatJar(type: Jar) {
	archiveBaseName = "Dev${project.archives_base_name}"
	duplicatesStrategy = DuplicatesStrategy.EXCLUDE
	from allprojects.collect { project ->
		project.sourceSets.test.output
	}
	from allprojects.collect { project ->
		project.sourceSets.main.output
	}
}